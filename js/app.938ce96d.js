(function(t){function e(e){for(var r,s,i=e[0],c=e[1],l=e[2],d=0,h=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&h.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={app:0},a=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/gomoku-vue/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"10ea":function(t,e,n){},"111d":function(t,e,n){},"3b2a":function(t,e,n){},"4a92":function(t,e,n){"use strict";var r=n("10ea"),o=n.n(r);o.a},"500f":function(t,e,n){"use strict";var r=n("3b2a"),o=n.n(r);o.a},5510:function(t,e,n){"use strict";var r=n("9579"),o=n.n(r);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"deep-orange",dark:""}},[n("div",{staticClass:"d-flex align-center"},[n("v-icon",{staticClass:"mr-1",attrs:{"x-large":""}},[t._v("mdi-blur")]),n("v-toolbar-title",{staticClass:"setFont",staticStyle:{"font-size":"2em"}},[t._v(" "+t._s(t.title)+" ")])],1),n("v-spacer"),n("v-btn",{attrs:{href:"https://github.com/azureleaf/gomoku-vue",target:"_blank",text:""}},[n("span",{staticClass:"mr-2 setFont disableCapsLock",staticStyle:{"font-size":"1.5em"}},[t._v(" GitHub ")]),n("v-icon",[t._v("mdi-open-in-new")])],1)],1),n("v-content",{attrs:{id:"main"}},[n("v-container",[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",sm:"8"}},[n("v-card",{staticClass:"d-flex justify-center",attrs:{height:"100%"}},[n("v-card-text",{staticClass:"d-flex justify-center align-center"},[n("div",[n("Board")],1)])],1)],1),n("v-col",{attrs:{cols:"12",sm:"4"}},[n("v-card",{attrs:{height:"100%"}},[n("v-card-text",[n("Panel")],1)],1)],1)],1)],1)],1)],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"board"},[t._l(t.boardSize,(function(e){return n("div",{key:e-1},t._l(t.boardSize,(function(r){return n("Square",{key:100*(e-1)+(r-1),attrs:{rowIndex:e-1,colIndex:r-1,hasO:t.boardBools[e-1][r-1].hasO,hasX:t.boardBools[e-1][r-1].hasX,isLatestMove:t.boardBools[e-1][r-1].isLatestMove},on:{isClicked:t.handleSquareClick}})})),1)})),n("v-dialog",{attrs:{"max-width":"300px"},model:{value:t.isDialogOpen,callback:function(e){t.isDialogOpen=e},expression:"isDialogOpen"}},[n("v-card",{staticClass:"setFont",attrs:{color:"deep-orange",dark:""}},[n("v-card-title",{staticClass:"justify-center"},["O"==t.winner||"X"==t.winner?n("span",[t._v(t._s(t.winner)+" won the game!")]):n("span",[t._v("Draw")])]),"O"!=t.winner&&"X"!=t.winner?n("v-card-text",{staticClass:"text-center"},[t._v("Please reset the game. ")]):t._e(),n("v-card-actions",{staticClass:"justify-center"},[n("v-btn",{staticClass:"mx-2",staticStyle:{"border-width":"2px"},attrs:{color:"white",text:"",outlined:""},on:{click:function(e){t.isDialogOpen=!1}}},[t._v(" OK ")])],1)],1)],1)],2)},i=[],c=(n("cb29"),n("d81d"),n("96cf"),n("1da1")),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"square",class:{bgColored:t.isLatestMove},on:{click:function(e){return t.handleSquareClick()}}},[t.hasO?n("SymbolO",{attrs:{isReverse:t.isReverse,pos:t.rowIndex+"-"+t.colIndex}}):t.hasX?n("SymbolX",{attrs:{isReverse:t.isReverse,pos:t.rowIndex+"-"+t.colIndex}}):t._e()],1)},u=[],d=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{height:t.jsonData.svgHeight,width:t.jsonData.svgWidth}},[n("g",{attrs:{fill:"none"}},[n("path",{staticClass:"circleStyle",class:{animationForward:!t.isReverse,animationBackward:t.isReverse},attrs:{id:"circle"+t.pos,stroke:"#F4511E","stroke-width":t.jsonData.svgStrokeWidth,fill:"none"}})])])}),h=[],f=(n("99af"),n("8842")),v={name:"SymbolO",props:["pos","isReverse"],data:function(){return{jsonData:f}},mounted:function(){var t=f.svgCircleRadius,e=f.svgPadding;document.getElementById("circle"+this.pos).setAttribute("d","M ".concat(t+e,",").concat(e," ")+"A ".concat(t,",").concat(t," 0 0 1 ").concat(t+e,",").concat(2*t+e," ")+"A ".concat(t,",").concat(t," 0 0 1 ").concat(t+e,",").concat(e))}},p=v,b=(n("b0fc"),n("2877")),g=Object(b["a"])(p,d,h,!1,null,"0b2a72e7",null),m=g.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{height:t.jsonData.svgHeight,width:t.jsonData.svgWidth}},[n("g",{attrs:{fill:"none"}},[n("path",{staticClass:"cross1",class:{cross1Forward:!t.isReverse,cross1Backward:t.isReverse},attrs:{id:"cross1-"+t.pos,fill:"none"}}),n("path",{staticClass:"cross2",class:{cross2Forward:!t.isReverse,cross2Backward:t.isReverse},attrs:{id:"cross2-"+t.pos,fill:"none"}})])])},x=[],S=(n("4160"),n("159b"),{name:"SymbolX",props:["pos","isReverse"],data:function(){return{jsonData:f}},mounted:function(){var t=f.svgCrossBoxLength,e=f.svgPadding,n=document.getElementById("cross1-"+this.pos);n.setAttribute("d","M ".concat(e,",").concat(e," L ").concat(2*t+e,",").concat(2*t+e," "));var r=document.getElementById("cross2-"+this.pos);r.setAttribute("d","M ".concat(e+2*t,",").concat(e," L ").concat(e,",").concat(e+2*t," ")),[n,r].forEach((function(t){t.setAttribute("stroke","blue"),t.setAttribute("stroke-width",f.svgStrokeWidth)}))}}),y=S,C=(n("500f"),Object(b["a"])(y,w,x,!1,null,"11be69bc",null)),O=C.exports,k={name:"Square",components:{SymbolO:m,SymbolX:O},props:{rowIndex:Number,colIndex:Number,hasO:Boolean,hasX:Boolean,isLatestMove:Boolean},data:function(){return{isReverse:!1}},methods:{handleSquareClick:function(){0==this.$store.state.boardStatus[this.rowIndex][this.colIndex].length&&""===this.$store.state.winner&&this.$emit("isClicked",this.rowIndex,this.colIndex)}}},B=k,_=(n("ec50"),Object(b["a"])(B,l,u,!1,null,"20ce2f09",null)),R=_.exports,z={name:"Board",components:{Square:R},data:function(){return{boardBools:[],isDialogOpen:!1}},computed:{winner:function(){return this.$store.state.winner},isResetRequested:function(){return this.$store.state.isResetRequested},boardSize:function(){return this.$store.state.boardSize}},watch:{winner:function(t,e){""==e&&(this.isDialogOpen=!0)},isResetRequested:function(t,e){0==e&&1==t&&(this.initBoard(),this.$store.commit("initBoard"))}},methods:{handleSquareClick:function(t,e){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$store.commit("putStone",{rowIndex:t,colIndex:e});case 2:return r.next=4,n.updateBoardBools(t,e);case 4:return n.$store.dispatch("moveCom"),r.next=7,n.$store.state.nextComMove;case 7:o=r.sent,n.updateBoardBools(o.rowIndex,o.colIndex);case 9:case"end":return r.stop()}}),r)})))()},updateBoardBools:function(t,e){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var o,a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$store.state.boardStatus;case 2:return o=r.sent,r.next=5,n.$store.state.history;case 5:a=r.sent,n.boardBools[t][e].hasO="O"==o[t][e],n.boardBools[t][e].hasX="X"==o[t][e],n.boardBools[t][e].isLatestMove=!0,a.length>1&&(s=a[a.length-2].row,i=a[a.length-2].col,n.boardBools[s][i].isLatestMove=!1);case 10:case"end":return r.stop()}}),r)})))()},initBoard:function(){this.boardBools=[];for(var t=0;t<this.boardSize;t++)this.boardBools.push(Array(this.boardSize).fill().map((function(){return{hasO:!1,hasX:!1,isLatestMove:!1}})))}},created:function(){this.initBoard()}},I=z,j=(n("4a92"),n("6544")),M=n.n(j),L=n("8336"),V=n("b0af"),D=n("99d9"),$=n("169a"),P=Object(b["a"])(I,s,i,!1,null,"3e2d80c2",null),A=P.exports;M()(P,{VBtn:L["a"],VCard:V["a"],VCardActions:D["a"],VCardText:D["b"],VCardTitle:D["c"],VDialog:$["a"]});var T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"setFont"},[n("v-dialog",{attrs:{"max-width":"300px"},model:{value:t.isDialogOpen,callback:function(e){t.isDialogOpen=e},expression:"isDialogOpen"}},[n("v-card",{staticClass:"setFont",attrs:{color:"deep-orange",dark:""}},[n("v-card-title",{staticClass:"justify-center"},[t._v("Reset the game?")]),n("v-card-text",{staticClass:"text-center"},[t._v(" New Board Size: "+t._s(this.boardSize)+" ")]),n("v-spacer"),n("v-card-actions",{staticClass:"justify-center"},[n("v-btn",{staticClass:"mx-2",staticStyle:{"border-width":"2px"},attrs:{color:"white",text:"",outlined:""},on:{click:function(e){t.isDialogOpen=!1}}},[t._v(" Cancel ")]),n("v-btn",{staticClass:"mx-2",staticStyle:{"border-width":"2px"},attrs:{color:"white",text:"",outlined:""},on:{click:t.handleGameResetBtn}},[t._v(" Reset ")])],1)],1)],1),n("p",[t._v(" Moves: "),n("span",{staticClass:"largeText ml-1"},[t._v(t._s(t.turns))])]),n("p",[t._v(" Turn: "),n("span",{staticClass:"largeText ml-1"},[t._v(t._s(t.activePlayer))])]),n("v-row",[n("v-col",{staticClass:"px-1",attrs:{cols:"12"}},[n("v-btn",{staticClass:"disableCapsLock ma-1",attrs:{depressed:"",color:t.uniColor,block:"",dark:""},on:{click:function(e){t.isDialogOpen=!0}}},[n("v-icon",{staticClass:"mr-1"},[t._v("mdi-reload")]),t._v("Reset ")],1)],1)],1),n("p",[t._v(" Board Size ")]),n("v-slider",{staticClass:"mt-6 pt-5",attrs:{step:"1",max:t.boardSizeLimit.max,min:t.boardSizeLimit.min,"thumb-label":"always",color:t.uniColor,"track-color":t.uniColor,"thumb-color":t.uniColor,ticks:"always","tick-size":"5"},on:{change:function(e){return t.updateChainLengthLimits()}},model:{value:t.boardSize,callback:function(e){t.boardSize=e},expression:"boardSize"}})],1)},X=[],E={name:"Panel",data:function(){return{boardSize:null,chainLength:5,uniColor:"deep-orange",boardSizeLimit:{max:20,min:5},isDialogOpen:!1}},computed:{turns:function(){return this.$store.state.history.length+1},activePlayer:function(){return this.$store.state.isOsTurn?"O":"X"}},methods:{updateChainLengthLimits:function(){this.isDialogOpen=!0},handleGameResetBtn:function(){this.isDialogOpen=!1,this.$store.commit("updateBoardSize",{boardSize:this.boardSize})}},mounted:function(){this.boardSize=this.$store.state.boardSize}},q=E,F=(n("5510"),n("62ad")),N=n("a523"),W=n("132d"),G=n("0fd9"),H=n("ba0d"),J=n("2fa4"),K=Object(b["a"])(q,T,X,!1,null,"e42563f2",null),Q=K.exports;M()(K,{VBtn:L["a"],VCard:V["a"],VCardActions:D["a"],VCardText:D["b"],VCardTitle:D["c"],VCol:F["a"],VContainer:N["a"],VDialog:$["a"],VIcon:W["a"],VRow:G["a"],VSlider:H["a"],VSpacer:J["a"]});var U={name:"App",components:{Board:A,Panel:Q},data:function(){return{title:"Gomoku"}},mounted:function(){this.$store.commit("initBoard")}},Y=U,Z=(n("7faf"),n("7496")),tt=n("40dc"),et=n("a75b"),nt=n("2a7f"),rt=Object(b["a"])(Y,o,a,!1,null,null,null),ot=rt.exports;M()(rt,{VApp:Z["a"],VAppBar:tt["a"],VBtn:L["a"],VCard:V["a"],VCardText:D["b"],VCol:F["a"],VContainer:N["a"],VContent:et["a"],VIcon:W["a"],VRow:G["a"],VSpacer:J["a"],VToolbarTitle:nt["a"]});var at=n("2f62"),st=(n("a623"),n("13d5"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("2909")),it=n("d4ec"),ct=n("bee2"),lt=function(){function t(e,n,r){Object(it["a"])(this,t),this.boardStatus=e,this.boardSize=n,this.chainLength=r,this.patterns=this.getPatterns(),this.scanOrigins=this.getScanOrigins(),this.disturbance=1,this.winner=""}return Object(ct["a"])(t,[{key:"getPatterns",value:function(){for(var t=new Array(Math.pow(2,this.chainLength)).fill(null),e=0;e<t.length;e++){var n=this.getBinaryArray(e,this.chainLength),r=this.getScoreArray(Object(st["a"])(n));t[e]={binary:Object(st["a"])(n),score:Object(st["a"])(r)}}return console.log("Template patterns:",t),this.sortPatterns(t)}},{key:"sortPatterns",value:function(t){return t.sort((function(t,e){return e.binary.reduce((function(t,e){return t+e}))-t.binary.reduce((function(t,e){return t+e}))}))}},{key:"getScoreArray",value:function(t){var e=t.reduce((function(t,e){return t+e}));return t.map((function(t){return 0===t?Math.pow(100,e):0}))}},{key:"getBinaryArray",value:function(t,e){var n=t.toString(2);while(n.length<e)n="0"+n;return n.split("").map((function(t){return Number(t)}))}},{key:"getScanOrigins",value:function(){for(var t=[],e=0;e<this.boardSize;e++)t.push({row:e,col:0,direction:"right"}),t.push({row:e,col:0,direction:"lowerRight"}),t.push({row:e,col:0,direction:"upperRight"}),t.push({row:0,col:e,direction:"down"});for(var n=1;n<this.boardSize;n++)t.push({row:0,col:n,direction:"lowerRight"}),t.push({row:this.boardSize-1,col:n,direction:"upperRight"});return t}},{key:"getRandomMove",value:function(t){var e=[];t.forEach((function(t,n){t.forEach((function(t,r){""==t&&e.push({rowIndex:n,colIndex:r})}))}));var n=Math.floor(Math.random()*e.length);return e[n]}},{key:"getNextMove",value:function(t){var e=this,n=!1,r={O:this.getScoreMatrix(t,"O",this.scanOrigins),X:this.getScoreMatrix(t,"X",this.scanOrigins)},o={row:null,col:null,compositeScore:0};if(r.O.map((function(t,n){return t.map((function(t,a){var s=t*e.disturbance+r.X[n][a];return s>o.compositeScore&&(o.row=n,o.col=a,o.compositeScore=s),s}))})),this.winner&&console.log("Winner:",this.winner),null==o.row&&null==o.col&&(this.winner=null,console.log("Draw game!")),n){var a=this.getRandomMove(t),s=a.rowIndex,i=a.colIndex;return{rowIndex:s,colIndex:i,winner:this.winner}}return{rowIndex:o.row,colIndex:o.col,winner:this.winner}}},{key:"getScoreMatrix",value:function(t,e,n){var r=this,o=n.reduce((function(n,o){var a=r.scanLine(t,{row:o.row,col:o.col},o.direction);return n.concat(r.matchPatterns(a,r.patterns,e))}),[]),a=t.map((function(t){return t.map((function(){return 0}))}));return o.forEach((function(t){a[t.row][t.col]+=t.score})),a}},{key:"matchPatterns",value:function(t,e,n){var r=this,o=[];if(t.length<this.chainLength)return o;for(var a=t.map((function(t){switch(t.value){case n:return 1;case"":return 0;default:return null}})),s=function(s){e.forEach((function(e){for(var i=0;i<e.binary.length;i++){if(a[s+i]!==e.binary[i])break;i===r.chainLength-1&&("O"==n&&e.binary.every((function(t){return 1==t}))?r.winner="O":"X"==n&&e.binary.reduce((function(t,e){return t+e}))==r.chainLength-1&&(r.winner="X"),e.score.forEach((function(e,n){0!==e&&o.push({row:t[s+n].row,col:t[s+n].col,score:e})})))}}))},i=0;i<t.length-this.chainLength+1;i++)s(i);return o}},{key:"scanLine",value:function(t,e,n){var r={row:e.row,col:e.col},o=[],a=!1;while(!a)switch(o.push({row:r.row,col:r.col,value:t[r.row][r.col]}),n){case"right":r.col===this.boardSize-1?a=!0:r.col++;break;case"down":r.row===this.boardSize-1?a=!0:r.row++;break;case"lowerRight":r.row===this.boardSize-1||r.col===this.boardSize-1?a=!0:(r.row++,r.col++);break;case"upperRight":0===r.row||r.col===this.boardSize-1?a=!0:(r.row--,r.col++);break;default:return console.error("Error: unknown direction '",n,"'"),null}return o}}]),t}();r["a"].use(at["a"]);var ut=new at["a"].Store({state:{boardStatus:[],boardSize:12,chainLength:5,isOsTurn:!0,history:[],brain:"",nextComMove:"",winner:"",isResetRequested:!1},mutations:{initBoard:function(t){t.boardStatus=[];for(var e=0;e<t.boardSize;e++)t.boardStatus.push(Array(t.boardSize).fill(""));this.state.brain=new lt(t.boardStatus,t.boardSize,t.chainLength),t.nextComMove="",t.winner="",t.isOsTurn=!0,t.history=[],t.isResetRequested=!1},updateBoardSize:function(t,e){console.log("state: got new board size",e.boardSize),t.boardSize=e.boardSize,t.isResetRequested=!0},getNextComMove:function(t){var e=t.brain.getNextMove(t.boardStatus),n=e.rowIndex,r=e.colIndex,o=e.winner;(o||null===o)&&(console.log("state: game result is confirmed."),t.winner=o,"O"==o&&(n=null,r=null)),t.nextComMove={rowIndex:n,colIndex:r}},putStone:function(t,e){if(null!=e.rowIndex&&null!=e.colIndex&&0==t.boardStatus[e.rowIndex][e.colIndex].length){var n=t.isOsTurn?"O":"X";t.boardStatus[e.rowIndex][e.colIndex]=n,t.history.push({row:e.rowIndex,col:e.colIndex,symbol:n}),t.isOsTurn=!t.isOsTurn}}},actions:{moveCom:function(t){var e=t.commit,n=t.state;e("getNextComMove"),e("putStone",n.nextComMove)}},modules:{}}),dt=n("f309");r["a"].use(dt["a"]);var ht=new dt["a"]({});r["a"].config.productionTip=!1,new r["a"]({store:ut,vuetify:ht,render:function(t){return t(ot)}}).$mount("#app")},"6b06":function(t,e,n){},"7faf":function(t,e,n){"use strict";var r=n("111d"),o=n.n(r);o.a},8842:function(t){t.exports=JSON.parse('{"svgHeight":20,"svgWidth":20,"svgCircleRadius":7,"svgCrossBoxLength":7,"svgPadding":3,"svgStrokeWidth":4,"crossAnimationDuration":"0.2s","crossDelay":"0.2s","circleAnimationDuration":"0.2s"}')},9579:function(t,e,n){},b0fc:function(t,e,n){"use strict";var r=n("d0b9"),o=n.n(r);o.a},d0b9:function(t,e,n){},ec50:function(t,e,n){"use strict";var r=n("6b06"),o=n.n(r);o.a}});
//# sourceMappingURL=app.938ce96d.js.map